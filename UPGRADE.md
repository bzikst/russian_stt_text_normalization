# Инструкция по обновлению модели для PyTorch 2.x

## Проблема

Модель `jit_s2s.pt` была сохранена в старом формате PyTorch 1.x и несовместима с PyTorch 2.x.

## Решение 1: Конвертация модели (рекомендуется)

Выполните конвертацию на машине с Python 3.8-3.10:

```bash
# Создайте виртуальное окружение
python3.10 -m venv venv_torch1
source venv_torch1/bin/activate

# Установите PyTorch 1.13.1
pip install torch==1.13.1 tqdm

# Конвертируйте модель
python convert_model.py

# Деактивируйте окружение
deactivate
```

После конвертации у вас появится файл `jit_s2s_v2.pt`, который совместим с PyTorch 2.x.

## Решение 2: Использование Docker

```bash
docker run --rm -v $(pwd):/workspace -w /workspace python:3.9 bash -c "
  pip install torch==1.13.1 tqdm && 
  python convert_model.py
"
```

## Решение 3: Использование старого формата (временное)

Если вы не можете конвертировать модель сейчас, библиотека попытается загрузить legacy-формат автоматически. Это может не работать на всех платформах.

## После конвертации

1. Убедитесь, что файл `jit_s2s_v2.pt` создан
2. Модель будет автоматически использовать новый формат, если он доступен
3. Старая модель сохранена как `jit_s2s_legacy.pt` для резервной копии

## Технические детали

- **Старый формат**: Legacy TorchScript format (PyTorch 1.x)
- **Новый формат**: Modern TorchScript format (PyTorch 2.x+)
- **Размер модели**: ~3.6 MB
- **Совместимость**: PyTorch >= 2.0

